{"ast":null,"code":"var _jsxFileName = \"C:\\\\EraserImage\\\\amonnatt_image-project\\\\undo\\\\image-project\\\\src\\\\components\\\\DrawRectangle\\\\DrawRectangle.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./DrawRectangle.css\";\nimport Loading from \"../Loading/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DrawRectangle = () => {\n  _s();\n  const [brushSize, setBrushSize] = useState(30);\n  const [brushColor, setBrushColor] = useState(\"rgba(255, 199, 122)\");\n  const canvasRef = useRef(null);\n  const contextRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [file, setFile] = useState();\n  const [imageDimensions, setImageDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [imageApi, setImageApi] = useState(null);\n  const [originalImage, setOriginalImage] = useState(null);\n  const [isLoading, setLoading] = useState(false);\n  useEffect(() => {\n    setupCanvas();\n  }, [brushSize, brushColor]);\n  useEffect(() => {\n    drawImageOnCanvas();\n  }, [file]);\n  const setupCanvas = () => {\n    const canvas = canvasRef.current;\n    canvas.width = 500;\n    canvas.height = 500;\n    const context = canvas.getContext(\"2d\");\n    context.lineCap = \"round\";\n    context.lineJoin = \"round\";\n    context.strokeStyle = \"black\";\n    context.lineWidth = brushSize;\n    context.strokeStyle = brushColor;\n    contextRef.current = context;\n  };\n  const startDrawing = ({\n    nativeEvent\n  }) => {\n    if (historyIndex !== history.length - 1) {\n      setHistory(history.slice(0, historyIndex + 1));\n    }\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    contextRef.current.beginPath();\n    contextRef.current.moveTo(offsetX, offsetY);\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    setIsDrawing(true);\n    nativeEvent.preventDefault();\n  };\n  const draw = ({\n    nativeEvent\n  }) => {\n    if (!isDrawing) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    nativeEvent.preventDefault();\n  };\n  const stopDrawing = () => {\n    if (isDrawing) {\n      setHistory([...history, canvasRef.current.toDataURL()]);\n      setHistoryIndex(history.length);\n    }\n    setIsDrawing(false);\n  };\n  const setToDraw = () => {\n    contextRef.current.globalCompositeOperation = \"source-over\";\n  };\n  const handleBrushSizeChange = event => {\n    const newSize = parseInt(event.target.value);\n    setBrushSize(newSize);\n  };\n  const setToErase = () => {\n    contextRef.current.globalCompositeOperation = \"destination-out\";\n  };\n  const saveImageToLocal = event => {\n    const link = event.currentTarget;\n    link.setAttribute(\"download\", \"canvas.png\");\n    const image = canvasRef.current.toDataURL(\"image/png\");\n    link.setAttribute(\"href\", image);\n  };\n  const handleFile = event => {\n    setFile(event.target.files[0]);\n  };\n  const setImageAndDraw = img => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    const maxWidth = window.innerWidth - 20;\n    const maxHeight = window.innerHeight - 150;\n    const width = img.width;\n    const height = img.height;\n    if (width > maxWidth || height > maxHeight) {\n      const ratio = Math.min(maxWidth / width, maxHeight / height);\n      img.width = width * ratio;\n      img.height = height * ratio;\n    }\n    canvas.width = img.width;\n    canvas.height = img.height;\n    context.drawImage(img, 0, 0, img.width, img.height);\n    context.lineCap = \"round\";\n    context.lineJoin = \"round\";\n    context.lineWidth = brushSize;\n    context.strokeStyle = brushColor;\n    setImageDimensions({\n      width: img.width,\n      height: img.height\n    });\n    setFile(null);\n    const canvasDataUrl = canvas.toDataURL(\"image/jpeg\");\n  };\n  const drawImageOnCanvas = () => {\n    const canvas = canvasRef.current;\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const img = new Image();\n        setOriginalImage(img);\n        img.onload = () => {\n          setImageAndDraw(img);\n        };\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    setHistory([]);\n    setHistoryIndex(-1);\n  };\n  const undo = () => {\n    if (historyIndex > 0) {\n      setHistoryIndex(historyIndex - 1);\n      const img = new Image();\n      img.src = history[historyIndex - 1];\n      img.onload = () => {\n        contextRef.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n        contextRef.current.drawImage(img, 0, 0);\n      };\n    }\n  };\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(historyIndex + 1);\n      const img = new Image();\n      img.src = history[historyIndex + 1];\n      img.onload = () => {\n        contextRef.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n        contextRef.current.drawImage(img, 0, 0);\n      };\n    }\n  };\n  const sendPicWish = async () => {\n    try {\n      console.log(\"Processing...\");\n      setLoading(true);\n      const apiUrl = \"https://techhk.aoscdn.com/api/tasks/visual/inpaint\";\n      const apiKey = \"wxyb7eada2qyxswg6\";\n      if (!originalImage && !imageApi) {\n        alert(\"Please upload an image before processing.\");\n        return;\n      }\n      const sourceImage = imageApi ? imageApi : originalImage;\n      const maxWidth = window.innerWidth - 20;\n      const maxHeight = window.innerHeight - 150;\n      let {\n        width,\n        height\n      } = sourceImage;\n      if (width > maxWidth || height > maxHeight) {\n        const ratio = Math.min(maxWidth / width, maxHeight / height);\n        width *= ratio;\n        height *= ratio;\n      }\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(sourceImage, 0, 0);\n      const blob = await new Promise(resolve => {\n        canvas.toBlob(resolve, \"image/jpeg\");\n      });\n      const imageFile = new File([blob], \"image.jpg\");\n      console.log(\"file\", imageFile);\n      const fileImageLink = document.createElement(\"a\");\n      fileImageLink.download = \"file_image.jpg\";\n      fileImageLink.href = canvas.toDataURL(\"image/jpeg\");\n      fileImageLink.style.display = \"none\";\n      document.body.appendChild(fileImageLink);\n      fileImageLink.click();\n      document.body.removeChild(fileImageLink);\n      const changCanvas = canvasRef.current;\n      const changContext = changCanvas.getContext(\"2d\");\n      const imageData = changContext.getImageData(0, 0, changCanvas.width, changCanvas.height);\n      const data = imageData.data;\n      for (let i = 0; i < data.length; i += 4) {\n        const red = data[i];\n        const green = data[i + 1];\n        const blue = data[i + 2];\n        if (red === 255 && green === 199 && blue === 122) {\n          data[i] = 255;\n          data[i + 1] = 255;\n          data[i + 2] = 255;\n          data[i + 3] = 255;\n        } else {\n          data[i] = 0;\n          data[i + 1] = 0;\n          data[i + 2] = 0;\n          data[i + 3] = 255;\n        }\n      }\n      const maskCanvas = document.createElement(\"canvas\");\n      const maskContext = maskCanvas.getContext(\"2d\");\n      maskCanvas.width = changCanvas.width;\n      maskCanvas.height = changCanvas.height;\n      maskContext.putImageData(imageData, 0, 0);\n      const maskBlob = await new Promise(resolve => {\n        maskCanvas.toBlob(resolve, \"image/jpeg\");\n      });\n      const maskFile = new File([maskBlob], \"mask.jpg\");\n      console.log(\"mask\", maskFile);\n      const maskImageLink = document.createElement(\"a\");\n      maskImageLink.download = \"mask_image.jpg\";\n      maskImageLink.href = maskCanvas.toDataURL(\"image/jpeg\");\n      maskImageLink.style.display = \"none\";\n      document.body.appendChild(maskImageLink);\n      maskImageLink.click();\n      document.body.removeChild(maskImageLink);\n      const formData = new FormData();\n      formData.append(\"sync\", \"1\");\n      formData.append(\"image_file\", imageFile);\n      formData.append(\"mask_file\", maskFile);\n      const response = await fetch(apiUrl, {\n        method: \"POST\",\n        headers: {\n          \"X-API-KEY\": apiKey\n        },\n        body: formData\n      });\n      if (response.ok) {\n        setLoading(false);\n        const data = await response.json();\n        console.log(data);\n        const imageUrl = data.data.image;\n        if (imageUrl) {\n          const img = new Image();\n          img.crossOrigin = \"Anonymous\";\n          img.onload = () => {\n            setImageAndDraw(img);\n            setImageApi(img);\n            const downloadLink = document.createElement(\"a\");\n            downloadLink.download = \"output_image.jpg\"; // ชื่อไฟล์ที่จะดาวน์โหลด\n            downloadLink.href = imageUrl; // URL ของรูปภาพจาก API\n            downloadLink.style.display = \"none\";\n            document.body.appendChild(downloadLink);\n            downloadLink.click();\n            document.body.removeChild(downloadLink);\n          };\n          img.src = imageUrl;\n        } else {\n          console.error(\"No image URL found in the API response.\");\n        }\n      } else {\n        throw new Error(\"An error occurred while sending the image.\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"head\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 22\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"canvas\", {\n        className: \"canvas-container\",\n        ref: canvasRef,\n        onMouseDown: startDrawing,\n        onMouseMove: draw,\n        onMouseUp: stopDrawing,\n        onMouseLeave: stopDrawing,\n        style: {\n          maxWidth: \"100%\",\n          maxHeight: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menuBar\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: setToErase,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-eraser icon-upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), \"Eraser\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"buttonEraser\",\n        onClick: sendPicWish,\n        children: \"PicWish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: undo,\n        children: \"Undo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: redo,\n        children: \"Redo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: clearCanvas,\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"button\",\n        id: \"download_image_link\",\n        href: \"download_link\",\n        onClick: saveImageToLocal,\n        children: \"Download Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        id: \"fileInput\",\n        onChange: handleFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n};\n_s(DrawRectangle, \"6dx97G70ug6wtUl27jzP/202tmU=\");\n_c = DrawRectangle;\nexport default DrawRectangle;\nvar _c;\n$RefreshReg$(_c, \"DrawRectangle\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Loading","jsxDEV","_jsxDEV","DrawRectangle","_s","brushSize","setBrushSize","brushColor","setBrushColor","canvasRef","contextRef","isDrawing","setIsDrawing","file","setFile","imageDimensions","setImageDimensions","width","height","history","setHistory","historyIndex","setHistoryIndex","imageApi","setImageApi","originalImage","setOriginalImage","isLoading","setLoading","setupCanvas","drawImageOnCanvas","canvas","current","context","getContext","lineCap","lineJoin","strokeStyle","lineWidth","startDrawing","nativeEvent","length","slice","offsetX","offsetY","beginPath","moveTo","lineTo","stroke","preventDefault","draw","stopDrawing","toDataURL","setToDraw","globalCompositeOperation","handleBrushSizeChange","event","newSize","parseInt","target","value","setToErase","saveImageToLocal","link","currentTarget","setAttribute","image","handleFile","files","setImageAndDraw","img","maxWidth","window","innerWidth","maxHeight","innerHeight","ratio","Math","min","drawImage","canvasDataUrl","reader","FileReader","onload","e","Image","src","result","readAsDataURL","clearCanvas","clearRect","undo","redo","sendPicWish","console","log","apiUrl","apiKey","alert","sourceImage","document","createElement","blob","Promise","resolve","toBlob","imageFile","File","fileImageLink","download","href","style","display","body","appendChild","click","removeChild","changCanvas","changContext","imageData","getImageData","data","i","red","green","blue","maskCanvas","maskContext","putImageData","maskBlob","maskFile","maskImageLink","formData","FormData","append","response","fetch","method","headers","ok","json","imageUrl","crossOrigin","downloadLink","error","Error","className","children","padding","fileName","_jsxFileName","lineNumber","columnNumber","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onClick","id","type","name","onChange","_c","$RefreshReg$"],"sources":["C:/EraserImage/amonnatt_image-project/undo/image-project/src/components/DrawRectangle/DrawRectangle.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./DrawRectangle.css\";\r\nimport Loading from \"../Loading/Loading\";\r\n\r\nconst DrawRectangle = () => {\r\n  const [brushSize, setBrushSize] = useState(30);\r\n  const [brushColor, setBrushColor] = useState(\"rgba(255, 199, 122)\");\r\n  const canvasRef = useRef(null);\r\n  const contextRef = useRef(null);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [file, setFile] = useState();\r\n  const [imageDimensions, setImageDimensions] = useState({ width: 0, height: 0 });\r\n  const [history, setHistory] = useState([]);\r\n  const [historyIndex, setHistoryIndex] = useState(-1);\r\n  const [imageApi, setImageApi] = useState(null);\r\n  const [originalImage, setOriginalImage] = useState(null);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setupCanvas();\r\n  }, [brushSize, brushColor]);\r\n\r\n  useEffect(() => {\r\n    drawImageOnCanvas();\r\n  }, [file]);\r\n\r\n  const setupCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n    canvas.width = 500;\r\n    canvas.height = 500;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.lineCap = \"round\";\r\n    context.lineJoin = \"round\";\r\n    context.strokeStyle = \"black\";\r\n    context.lineWidth = brushSize;\r\n    context.strokeStyle = brushColor;\r\n    contextRef.current = context;\r\n  };\r\n\r\n  const startDrawing = ({ nativeEvent }) => {\r\n    if (historyIndex !== history.length - 1) {\r\n      setHistory(history.slice(0, historyIndex + 1));\r\n    }\r\n\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.beginPath();\r\n    contextRef.current.moveTo(offsetX, offsetY);\r\n    contextRef.current.lineTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n    setIsDrawing(true);\r\n    nativeEvent.preventDefault();\r\n  };\r\n\r\n  const draw = ({ nativeEvent }) => {\r\n    if (!isDrawing) {\r\n      return;\r\n    }\r\n\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.lineTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n    nativeEvent.preventDefault();\r\n  };\r\n\r\n  const stopDrawing = () => {\r\n    if (isDrawing) {\r\n      setHistory([...history, canvasRef.current.toDataURL()]);\r\n      setHistoryIndex(history.length);\r\n    }\r\n    setIsDrawing(false);\r\n  };\r\n\r\n  const setToDraw = () => {\r\n    contextRef.current.globalCompositeOperation = \"source-over\";\r\n  };\r\n\r\n  const handleBrushSizeChange = (event) => {\r\n    const newSize = parseInt(event.target.value);\r\n    setBrushSize(newSize);\r\n  };\r\n\r\n  const setToErase = () => {\r\n    contextRef.current.globalCompositeOperation = \"destination-out\";\r\n  };\r\n\r\n  const saveImageToLocal = (event) => {\r\n    const link = event.currentTarget;\r\n    link.setAttribute(\"download\", \"canvas.png\");\r\n    const image = canvasRef.current.toDataURL(\"image/png\");\r\n    link.setAttribute(\"href\", image);\r\n  };\r\n\r\n  const handleFile = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  const setImageAndDraw = (img) => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    const maxWidth = window.innerWidth - 20;\r\n    const maxHeight = window.innerHeight - 150;\r\n    const width = img.width;\r\n    const height = img.height;\r\n\r\n    if (width > maxWidth || height > maxHeight) {\r\n      const ratio = Math.min(maxWidth / width, maxHeight / height);\r\n      img.width = width * ratio;\r\n      img.height = height * ratio;\r\n    }\r\n\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    context.drawImage(img, 0, 0, img.width, img.height);\r\n    context.lineCap = \"round\";\r\n    context.lineJoin = \"round\";\r\n    context.lineWidth = brushSize;\r\n    context.strokeStyle = brushColor;\r\n    setImageDimensions({ width: img.width, height: img.height });\r\n    setFile(null);\r\n\r\n    const canvasDataUrl = canvas.toDataURL(\"image/jpeg\");\r\n  };\r\n\r\n  const drawImageOnCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (file) {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (e) => {\r\n        const img = new Image();\r\n        setOriginalImage(img);\r\n\r\n        img.onload = () => {\r\n          setImageAndDraw(img);\r\n        };\r\n\r\n        img.src = e.target.result;\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const clearCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    setHistory([]);\r\n    setHistoryIndex(-1);\r\n  };\r\n\r\n  const undo = () => {\r\n    if (historyIndex > 0) {\r\n      setHistoryIndex(historyIndex - 1);\r\n      const img = new Image();\r\n      img.src = history[historyIndex - 1];\r\n      img.onload = () => {\r\n        contextRef.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n        contextRef.current.drawImage(img, 0, 0);\r\n      };\r\n    }\r\n  };\r\n\r\n  const redo = () => {\r\n    if (historyIndex < history.length - 1) {\r\n      setHistoryIndex(historyIndex + 1);\r\n      const img = new Image();\r\n      img.src = history[historyIndex + 1];\r\n      img.onload = () => {\r\n        contextRef.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n        contextRef.current.drawImage(img, 0, 0);\r\n      };\r\n    }\r\n  };\r\n\r\n  const sendPicWish = async () => {\r\n    try {\r\n      console.log(\"Processing...\");\r\n      setLoading(true);\r\n      const apiUrl = \"https://techhk.aoscdn.com/api/tasks/visual/inpaint\";\r\n      const apiKey = \"wxyb7eada2qyxswg6\";\r\n\r\n      if (!originalImage && !imageApi) {\r\n        alert(\"Please upload an image before processing.\");\r\n        return;\r\n      }\r\n\r\n      const sourceImage = imageApi ? imageApi : originalImage;\r\n\r\n      const maxWidth = window.innerWidth - 20;\r\n      const maxHeight = window.innerHeight - 150;\r\n      let { width, height } = sourceImage;\r\n\r\n      if (width > maxWidth || height > maxHeight) {\r\n        const ratio = Math.min(maxWidth / width, maxHeight / height);\r\n        width *= ratio;\r\n        height *= ratio;\r\n      }\r\n\r\n      const canvas = document.createElement(\"canvas\");\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      const context = canvas.getContext(\"2d\");\r\n      context.drawImage(sourceImage, 0, 0);\r\n\r\n      const blob = await new Promise((resolve) => {\r\n        canvas.toBlob(resolve, \"image/jpeg\");\r\n      });\r\n      const imageFile = new File([blob], \"image.jpg\");\r\n      console.log(\"file\", imageFile);\r\n\r\n      const fileImageLink = document.createElement(\"a\");\r\n        fileImageLink.download = \"file_image.jpg\";\r\n        fileImageLink.href = canvas.toDataURL(\"image/jpeg\");\r\n        fileImageLink.style.display = \"none\";\r\n        document.body.appendChild(fileImageLink);\r\n        fileImageLink.click();\r\n        document.body.removeChild(fileImageLink);\r\n\r\n      const changCanvas = canvasRef.current;\r\n      const changContext = changCanvas.getContext(\"2d\");\r\n      const imageData = changContext.getImageData(0, 0, changCanvas.width, changCanvas.height);\r\n      const data = imageData.data;\r\n\r\n      for (let i = 0; i < data.length; i += 4) {\r\n        const red = data[i];\r\n        const green = data[i + 1];\r\n        const blue = data[i + 2];\r\n\r\n        if (red === 255 && green === 199 && blue === 122) {\r\n          data[i] = 255;\r\n          data[i + 1] = 255;\r\n          data[i + 2] = 255;\r\n          data[i + 3] = 255;\r\n        } else {\r\n          data[i] = 0;\r\n          data[i + 1] = 0;\r\n          data[i + 2] = 0;\r\n          data[i + 3] = 255;\r\n        }\r\n      }\r\n\r\n      const maskCanvas = document.createElement(\"canvas\");\r\n      const maskContext = maskCanvas.getContext(\"2d\");\r\n      maskCanvas.width = changCanvas.width;\r\n      maskCanvas.height = changCanvas.height;\r\n      maskContext.putImageData(imageData, 0, 0);\r\n\r\n      const maskBlob = await new Promise((resolve) => {\r\n        maskCanvas.toBlob(resolve, \"image/jpeg\");\r\n      });\r\n      const maskFile = new File([maskBlob], \"mask.jpg\");\r\n      console.log(\"mask\", maskFile);\r\n\r\n      const maskImageLink = document.createElement(\"a\");\r\n      maskImageLink.download = \"mask_image.jpg\";\r\n      maskImageLink.href = maskCanvas.toDataURL(\"image/jpeg\");\r\n      maskImageLink.style.display = \"none\";\r\n      document.body.appendChild(maskImageLink);\r\n      maskImageLink.click();\r\n      document.body.removeChild(maskImageLink);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"sync\", \"1\");\r\n      formData.append(\"image_file\", imageFile);\r\n      formData.append(\"mask_file\", maskFile);\r\n\r\n      const response = await fetch(apiUrl, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"X-API-KEY\": apiKey,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (response.ok) {\r\n        setLoading(false);\r\n        const data = await response.json();\r\n        console.log(data);\r\n        const imageUrl = data.data.image;\r\n\r\n        if (imageUrl) {\r\n          const img = new Image();\r\n          img.crossOrigin = \"Anonymous\";\r\n          img.onload = () => {\r\n            setImageAndDraw(img);\r\n            setImageApi(img);\r\n\r\n            const downloadLink = document.createElement(\"a\");\r\n            downloadLink.download = \"output_image.jpg\"; // ชื่อไฟล์ที่จะดาวน์โหลด\r\n            downloadLink.href = imageUrl; // URL ของรูปภาพจาก API\r\n            downloadLink.style.display = \"none\";\r\n            document.body.appendChild(downloadLink);\r\n            downloadLink.click();\r\n            document.body.removeChild(downloadLink);\r\n\r\n          };\r\n          img.src = imageUrl;\r\n        } else {\r\n          console.error(\"No image URL found in the API response.\");\r\n        }\r\n      } else {\r\n        throw new Error(\"An error occurred while sending the image.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"head\">\r\n      <div style={{ padding: 20 }}>\r\n        {isLoading ? <Loading /> : null}\r\n        <canvas\r\n          className=\"canvas-container\"\r\n          ref={canvasRef}\r\n          onMouseDown={startDrawing}\r\n          onMouseMove={draw}\r\n          onMouseUp={stopDrawing}\r\n          onMouseLeave={stopDrawing}\r\n          style={{\r\n            maxWidth: \"100%\",\r\n            maxHeight: \"100%\",\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"menuBar\">\r\n        <button className=\"button\" onClick={setToErase}>\r\n          <i className=\"fa-solid fa-eraser icon-upload\"></i>\r\n          Eraser\r\n        </button>\r\n        <button className=\"buttonEraser\" onClick={sendPicWish}>\r\n          PicWish\r\n        </button>\r\n        <button className=\"button\" onClick={undo}>\r\n          Undo\r\n        </button>\r\n        <button className=\"button\" onClick={redo}>\r\n          Redo\r\n        </button>\r\n        <button className=\"button\" onClick={clearCanvas}>\r\n          Clear\r\n        </button>\r\n        <a\r\n          className=\"button\"\r\n          id=\"download_image_link\"\r\n          href=\"download_link\"\r\n          onClick={saveImageToLocal}\r\n        >\r\n          Download Image\r\n        </a>\r\n        <input type=\"file\" name=\"file\" id=\"fileInput\" onChange={handleFile} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DrawRectangle;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
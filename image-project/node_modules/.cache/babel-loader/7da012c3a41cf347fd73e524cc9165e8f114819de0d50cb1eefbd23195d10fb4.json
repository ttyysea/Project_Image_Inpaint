{"ast":null,"code":"var _jsxFileName = \"C:\\\\EraserImage\\\\amonnatt_image-project\\\\undo\\\\image-project\\\\src\\\\components\\\\DrawRectangle\\\\DrawRectangle.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./DrawRectangle.css\";\nimport { HiArrowUturnRight, HiArrowUturnLeft } from \"react-icons/hi2\";\nimport { AiOutlineDownload, AiOutlineZoomIn, AiOutlineZoomOut } from \"react-icons/ai\";\nimport { CiImageOn } from \"react-icons/ci\";\nimport Loading from \"../Loading/Loading\";\nimport panzoom from 'panzoom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst canvasSize = 800; // Set your canvas size here\nconst createShadow = size => `${size}px ${size}px 10px #ccc inset`;\nconst shadowSize = 8;\nconst bg = {\n  direction: 45,\n  color: {\n    dark: '#ccc',\n    light: 'transparent'\n  },\n  size: 20,\n  span: 100 / 4\n};\nconst DrawRectangle = () => {\n  _s();\n  const [brushSize, setBrushSize] = useState(50);\n  const [brushColor, setBrushColor] = useState(\"rgba(255, 199, 122)\");\n  const canvasRef = useRef(null);\n  const contextRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [file, setFile] = useState();\n  const [imageDimensions, setImageDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [imageApi, setImageApi] = useState(null);\n  const [originalImage, setOriginalImage] = useState(null);\n  const fileInputRef = useRef(null);\n  const [isLoading, setLoading] = useState(false);\n  const [canDownload, setCanDownload] = useState(false);\n  const [zoom, setZoom] = useState(1);\n  const [imagePosition, setImagePosition] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // เรียก setupCanvas ครั้งเดียวเมื่อ Canvas ถูกสร้างขึ้นเท่านั้น\n  useEffect(() => {\n    setupCanvas();\n  }, []);\n  useEffect(() => {\n    drawImageOnCanvas();\n  }, [file]);\n  const setupCanvas = () => {\n    const canvas = canvasRef.current;\n    canvas.width = 500;\n    canvas.height = 500;\n    const context = canvas.getContext(\"2d\");\n    context.lineCap = \"round\";\n    context.lineJoin = \"round\";\n    context.lineWidth = 50;\n    context.strokeStyle = brushColor;\n    contextRef.current = context;\n  };\n  const startDrawing = ({\n    nativeEvent\n  }) => {\n    if (historyIndex !== history.length - 1) {\n      // Clear the future history if we're branching off from a point in history.\n      setHistory(history.slice(0, historyIndex + 1));\n    }\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    contextRef.current.beginPath();\n    contextRef.current.moveTo(offsetX, offsetY);\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    setIsDrawing(true);\n    nativeEvent.preventDefault();\n  };\n  const draw = ({\n    nativeEvent\n  }) => {\n    if (!isDrawing) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    nativeEvent.preventDefault();\n  };\n  const stopDrawing = () => {\n    if (isDrawing) {\n      setHistory([...history, canvasRef.current.toDataURL()]);\n      setHistoryIndex(history.length);\n    }\n    setIsDrawing(false);\n  };\n  const setToDraw = () => {\n    contextRef.current.globalCompositeOperation = \"source-over\";\n  };\n  const handleBrushSizeChange = event => {\n    const newSize = parseInt(event.target.value);\n    setBrushSize(newSize);\n\n    // ตั้งค่า context.lineWidth ตามขนาดแปรงใหม่\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.lineWidth = newSize;\n  };\n  const setToErase = () => {\n    contextRef.current.globalCompositeOperation = \"destination-out\";\n  };\n  const saveImageToLocal = () => {\n    const image = canvasRef.current.toDataURL(\"image/png\");\n    const link = document.createElement(\"a\");\n    link.href = image;\n    link.download = \"canvas.png\";\n    link.click();\n  };\n  const handleFile = event => {\n    setFile(event.target.files[0]);\n  };\n  const setImageAndDraw = img => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    const maxWidth = window.innerWidth - 20;\n    const maxHeight = window.innerHeight - 240;\n    const width = img.width;\n    const height = img.height;\n    if (width > maxWidth || height > maxHeight) {\n      const ratio = Math.min(maxWidth / width, maxHeight / height);\n      img.width = width * ratio;\n      img.height = height * ratio;\n    }\n    canvas.width = img.width;\n    canvas.height = img.height;\n    context.drawImage(img, 0, 0, img.width, img.height);\n    context.lineCap = \"round\";\n    context.lineJoin = \"round\";\n    context.lineWidth = 50;\n    context.strokeStyle = brushColor;\n    setImageDimensions({\n      width: img.width,\n      height: img.height\n    });\n    setFile(null);\n  };\n  const drawImageOnCanvas = () => {\n    const canvas = canvasRef.current;\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const img = new Image();\n        setOriginalImage(img);\n        img.onload = () => {\n          setImageAndDraw(img);\n        };\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    setHistory([]);\n    setHistoryIndex(-1);\n    setCanDownload(false);\n    setOriginalImage(null);\n    setImageApi(null);\n  };\n  const undo = () => handleHistoryChange(historyIndex - 1);\n  const redo = () => handleHistoryChange(historyIndex + 1);\n  const handleHistoryChange = newIndex => {\n    if (newIndex >= 0 && newIndex < history.length) {\n      setHistoryIndex(newIndex);\n      const img = new Image();\n      img.src = history[newIndex];\n      img.onload = () => {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.drawImage(img, 0, 0);\n      };\n    }\n  };\n  const sendPicWish = async () => {\n    try {\n      console.log(\"Processing...\");\n      setLoading(true);\n      const apiUrl = process.env.REACT_APP_API_URL;\n      const apiKey = process.env.REACT_APP_API_KEY;\n      if (!originalImage && !imageApi) {\n        setLoading(false);\n        alert(\"Please upload an image before processing.\");\n        return;\n      }\n      const sourceImage = imageApi || originalImage;\n\n      // Create a new FormData object to send files and additional data\n      const formData = new FormData();\n\n      // Append the image file to the FormData\n      formData.append('image_file', sourceImage);\n\n      // Create a canvas for processing the image and mask\n      const canvas = document.createElement(\"canvas\");\n      const context = canvas.getContext(\"2d\");\n\n      // Perform your image processing here on the canvas\n\n      // Convert the processed image on the canvas to a Blob\n      const blob = await new Promise(resolve => {\n        canvas.toBlob(resolve, \"image/jpeg\");\n      });\n\n      // Create a File object from the Blob\n      const imageFile = new File([blob], \"image.jpg\");\n\n      // Append the image file to the FormData\n      formData.append('image_file', imageFile);\n\n      // Repeat the same process for the mask\n      // (create a canvas, perform processing, create Blob, and File)\n\n      // Append the mask file to the FormData\n      formData.append('mask_file', maskFile);\n\n      // Add any additional data to the FormData if needed\n      formData.append('sync', '1');\n      const response = await fetch(apiUrl, {\n        method: \"POST\",\n        headers: {\n          \"X-API-KEY\": apiKey,\n          'accessToken': 'YOUR_ACCESS_TOKEN' // Add your access token here\n        },\n\n        body: formData\n      });\n      if (response.ok) {\n        setLoading(false);\n        const data = await response.json();\n        console.log(data);\n        const imageUrl = data.data.image;\n        if (imageUrl) {\n          const img = new Image();\n          img.crossOrigin = \"Anonymous\";\n          img.onload = () => {\n            setImageAndDraw(img);\n            setImageApi(img);\n            setCanDownload(true);\n          };\n          img.src = imageUrl;\n        } else {\n          console.error(\"No image URL found in the API response.\");\n        }\n      } else {\n        throw new Error(\"An error occurred while sending the image.\");\n      }\n    } catch (error) {\n      setLoading(false);\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"head\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"icon-image\",\n      onClick: () => fileInputRef.current.click(),\n      children: /*#__PURE__*/_jsxDEV(CiImageOn, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: handleFile,\n      multiple: false,\n      ref: fileInputRef,\n      type: \"file\",\n      hidden: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 5\n      },\n      children: [isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 22\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        onMouseDown: startDrawing,\n        onMouseMove: draw,\n        onMouseUp: stopDrawing,\n        onMouseLeave: stopDrawing,\n        style: {\n          transform: `scale(${zoom})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menuBar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brushClass\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"10\",\n          max: \"150\",\n          value: brushSize,\n          className: \"range\",\n          onChange: handleBrushSizeChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttonEraser\",\n        onClick: sendPicWish,\n        children: \"PicWish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button icon\",\n        onClick: undo,\n        children: /*#__PURE__*/_jsxDEV(HiArrowUturnLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button icon\",\n        onClick: redo,\n        children: /*#__PURE__*/_jsxDEV(HiArrowUturnRight, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button\",\n        onClick: clearCanvas,\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button\",\n        onClick: () => setZoom(zoom + 0.1),\n        children: /*#__PURE__*/_jsxDEV(AiOutlineZoomIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 69\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button\",\n        onClick: () => setZoom(Math.max(0.1, zoom - 0.1)),\n        children: /*#__PURE__*/_jsxDEV(AiOutlineZoomOut, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 84\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `button icon ${canDownload ? \"\" : \"disabled\"}`,\n        id: \"download_image_link\",\n        onClick: canDownload ? saveImageToLocal : null,\n        download: \"canvas.png\",\n        children: /*#__PURE__*/_jsxDEV(AiOutlineDownload, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n};\n_s(DrawRectangle, \"k6Fz8SSbUXzVSMv3TMNtNqj1TPA=\");\n_c = DrawRectangle;\nexport default DrawRectangle;\nvar _c;\n$RefreshReg$(_c, \"DrawRectangle\");","map":{"version":3,"names":["React","useEffect","useRef","useState","HiArrowUturnRight","HiArrowUturnLeft","AiOutlineDownload","AiOutlineZoomIn","AiOutlineZoomOut","CiImageOn","Loading","panzoom","jsxDEV","_jsxDEV","canvasSize","createShadow","size","shadowSize","bg","direction","color","dark","light","span","DrawRectangle","_s","brushSize","setBrushSize","brushColor","setBrushColor","canvasRef","contextRef","isDrawing","setIsDrawing","file","setFile","imageDimensions","setImageDimensions","width","height","history","setHistory","historyIndex","setHistoryIndex","imageApi","setImageApi","originalImage","setOriginalImage","fileInputRef","isLoading","setLoading","canDownload","setCanDownload","zoom","setZoom","imagePosition","setImagePosition","x","y","setupCanvas","drawImageOnCanvas","canvas","current","context","getContext","lineCap","lineJoin","lineWidth","strokeStyle","startDrawing","nativeEvent","length","slice","offsetX","offsetY","beginPath","moveTo","lineTo","stroke","preventDefault","draw","stopDrawing","toDataURL","setToDraw","globalCompositeOperation","handleBrushSizeChange","event","newSize","parseInt","target","value","setToErase","saveImageToLocal","image","link","document","createElement","href","download","click","handleFile","files","setImageAndDraw","img","maxWidth","window","innerWidth","maxHeight","innerHeight","ratio","Math","min","drawImage","reader","FileReader","onload","e","Image","src","result","readAsDataURL","clearCanvas","clearRect","undo","handleHistoryChange","redo","newIndex","sendPicWish","console","log","apiUrl","process","env","REACT_APP_API_URL","apiKey","REACT_APP_API_KEY","alert","sourceImage","formData","FormData","append","blob","Promise","resolve","toBlob","imageFile","File","maskFile","response","fetch","method","headers","body","ok","data","json","imageUrl","crossOrigin","error","Error","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onChange","multiple","ref","type","hidden","style","padding","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","transform","max","id","_c","$RefreshReg$"],"sources":["C:/EraserImage/amonnatt_image-project/undo/image-project/src/components/DrawRectangle/DrawRectangle.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./DrawRectangle.css\";\r\nimport { HiArrowUturnRight, HiArrowUturnLeft } from \"react-icons/hi2\";\r\nimport { AiOutlineDownload,AiOutlineZoomIn,AiOutlineZoomOut } from \"react-icons/ai\";\r\nimport { CiImageOn } from \"react-icons/ci\";\r\nimport Loading from \"../Loading/Loading\";\r\nimport panzoom from 'panzoom';\r\n\r\nconst canvasSize = 800; // Set your canvas size here\r\nconst createShadow = (size) => `${size}px ${size}px 10px #ccc inset`;\r\nconst shadowSize = 8;\r\nconst bg = {\r\n  direction: 45,\r\n  color: {\r\n    dark: '#ccc',\r\n    light: 'transparent',\r\n  },\r\n  size: 20,\r\n  span: 100 / 4,\r\n};\r\n\r\nconst DrawRectangle = () => {\r\n  const [brushSize, setBrushSize] = useState(50);\r\n  const [brushColor, setBrushColor] = useState(\"rgba(255, 199, 122)\");\r\n  const canvasRef = useRef(null);\r\n  const contextRef = useRef(null);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [file, setFile] = useState();\r\n  const [imageDimensions, setImageDimensions] = useState({ width: 0, height: 0 });\r\n  const [history, setHistory] = useState([]);\r\n  const [historyIndex, setHistoryIndex] = useState(-1);\r\n  const [imageApi, setImageApi] = useState(null);\r\n  const [originalImage, setOriginalImage] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [canDownload, setCanDownload] = useState(false);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [imagePosition, setImagePosition] = useState({ x: 0, y: 0 });\r\n\r\n\r\n  // เรียก setupCanvas ครั้งเดียวเมื่อ Canvas ถูกสร้างขึ้นเท่านั้น\r\n  useEffect(() => {\r\n    setupCanvas();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    drawImageOnCanvas();\r\n  }, [file]);\r\n\r\n  const setupCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n    canvas.width = 500;\r\n    canvas.height = 500;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.lineCap = \"round\";\r\n    context.lineJoin = \"round\";\r\n    context.lineWidth = 50;\r\n    context.strokeStyle = brushColor;\r\n    contextRef.current = context;\r\n  };\r\n\r\n  const startDrawing = ({ nativeEvent }) => {\r\n    if (historyIndex !== history.length - 1) {\r\n      // Clear the future history if we're branching off from a point in history.\r\n      setHistory(history.slice(0, historyIndex + 1));\r\n    }\r\n\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.beginPath();\r\n    contextRef.current.moveTo(offsetX, offsetY);\r\n    contextRef.current.lineTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n    setIsDrawing(true);\r\n    nativeEvent.preventDefault();\r\n  };\r\n\r\n  const draw = ({ nativeEvent }) => {\r\n    if (!isDrawing) {\r\n      return;\r\n    }\r\n\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.lineTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n    nativeEvent.preventDefault();\r\n  };\r\n\r\n  const stopDrawing = () => {\r\n    if (isDrawing) {\r\n      setHistory([...history, canvasRef.current.toDataURL()]);\r\n      setHistoryIndex(history.length);\r\n    }\r\n    setIsDrawing(false);\r\n  };\r\n\r\n  const setToDraw = () => {\r\n    contextRef.current.globalCompositeOperation = \"source-over\";\r\n  };\r\n\r\n  const handleBrushSizeChange = (event) => {\r\n    const newSize = parseInt(event.target.value);\r\n    setBrushSize(newSize);\r\n  \r\n    // ตั้งค่า context.lineWidth ตามขนาดแปรงใหม่\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.lineWidth = newSize;\r\n  };\r\n  \r\n\r\n  const setToErase = () => {\r\n    contextRef.current.globalCompositeOperation = \"destination-out\";\r\n  };\r\n\r\n  const saveImageToLocal = () => {\r\n    const image = canvasRef.current.toDataURL(\"image/png\");\r\n    const link = document.createElement(\"a\");\r\n    link.href = image;\r\n    link.download = \"canvas.png\";\r\n    link.click();\r\n  };\r\n\r\n  const handleFile = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  const setImageAndDraw = (img) => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    const maxWidth = window.innerWidth - 20;\r\n    const maxHeight = window.innerHeight - 240;\r\n    const width = img.width;\r\n    const height = img.height;\r\n\r\n    if (width > maxWidth || height > maxHeight) {\r\n      const ratio = Math.min(maxWidth / width, maxHeight / height);\r\n      img.width = width * ratio;\r\n      img.height = height * ratio;\r\n    }\r\n\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    context.drawImage(img, 0, 0, img.width, img.height);\r\n    context.lineCap = \"round\";\r\n    context.lineJoin = \"round\";\r\n    context.lineWidth = 50;\r\n    context.strokeStyle = brushColor;\r\n    setImageDimensions({ width: img.width, height: img.height });\r\n    setFile(null);\r\n  };\r\n\r\n  const drawImageOnCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (file) {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (e) => {\r\n        const img = new Image();\r\n        setOriginalImage(img);\r\n\r\n        img.onload = () => {\r\n          setImageAndDraw(img);\r\n        };\r\n\r\n        img.src = e.target.result;\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const clearCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    setHistory([]);\r\n    setHistoryIndex(-1);\r\n    setCanDownload(false);\r\n    setOriginalImage(null);\r\n    setImageApi(null);\r\n  };\r\n\r\n  const undo = () => handleHistoryChange(historyIndex - 1);\r\n  const redo = () => handleHistoryChange(historyIndex + 1);\r\n\r\n  const handleHistoryChange = (newIndex) => {\r\n    if (newIndex >= 0 && newIndex < history.length) {\r\n      setHistoryIndex(newIndex);\r\n      const img = new Image();\r\n      img.src = history[newIndex];\r\n      img.onload = () => {\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext(\"2d\");\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        context.drawImage(img, 0, 0);\r\n      };\r\n    }\r\n  };\r\n\r\n  const sendPicWish = async () => {\r\n    try {\r\n      console.log(\"Processing...\");\r\n      setLoading(true);\r\n      const apiUrl = process.env.REACT_APP_API_URL;\r\n      const apiKey = process.env.REACT_APP_API_KEY;\r\n\r\n      if (!originalImage && !imageApi) {\r\n        setLoading(false);\r\n        alert(\"Please upload an image before processing.\");\r\n        return;\r\n      }\r\n\r\n      const sourceImage = imageApi || originalImage;\r\n\r\n      // Create a new FormData object to send files and additional data\r\n      const formData = new FormData();\r\n\r\n      // Append the image file to the FormData\r\n      formData.append('image_file', sourceImage);\r\n\r\n      // Create a canvas for processing the image and mask\r\n      const canvas = document.createElement(\"canvas\");\r\n      const context = canvas.getContext(\"2d\");\r\n\r\n      // Perform your image processing here on the canvas\r\n\r\n      // Convert the processed image on the canvas to a Blob\r\n      const blob = await new Promise((resolve) => {\r\n        canvas.toBlob(resolve, \"image/jpeg\");\r\n      });\r\n\r\n      // Create a File object from the Blob\r\n      const imageFile = new File([blob], \"image.jpg\");\r\n\r\n      // Append the image file to the FormData\r\n      formData.append('image_file', imageFile);\r\n\r\n      // Repeat the same process for the mask\r\n      // (create a canvas, perform processing, create Blob, and File)\r\n\r\n      // Append the mask file to the FormData\r\n      formData.append('mask_file', maskFile);\r\n\r\n      // Add any additional data to the FormData if needed\r\n      formData.append('sync', '1');\r\n\r\n      const response = await fetch(apiUrl, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"X-API-KEY\": apiKey,\r\n          'accessToken': 'YOUR_ACCESS_TOKEN', // Add your access token here\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (response.ok) {\r\n        setLoading(false);\r\n        const data = await response.json();\r\n        console.log(data);\r\n        const imageUrl = data.data.image;\r\n\r\n        if (imageUrl) {\r\n          const img = new Image();\r\n          img.crossOrigin = \"Anonymous\";\r\n          img.onload = () => {\r\n            setImageAndDraw(img);\r\n            setImageApi(img);\r\n            setCanDownload(true);\r\n          };\r\n          img.src = imageUrl;\r\n        } else {\r\n          console.error(\"No image URL found in the API response.\");\r\n        }\r\n      } else {\r\n        throw new Error(\"An error occurred while sending the image.\");\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      console.error(error);\r\n    }\r\n};\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"head\">\r\n      <div className=\"icon-image\" onClick={() => fileInputRef.current.click()}>\r\n        <CiImageOn />\r\n      </div>\r\n      <input onChange={handleFile} multiple={false} ref={fileInputRef} type=\"file\" hidden />\r\n\r\n      <div style={{ padding: 5 }}>\r\n        {isLoading ? <Loading /> : null}\r\n        <canvas\r\n          ref={canvasRef}\r\n          onMouseDown={startDrawing}\r\n          onMouseMove={draw}\r\n          onMouseUp={stopDrawing}\r\n          onMouseLeave={stopDrawing}\r\n          style={{\r\n            transform: `scale(${zoom})`, \r\n          }}\r\n              \r\n        />\r\n      </div>\r\n\r\n      <div className=\"menuBar\">\r\n        <div className=\"brushClass\">\r\n          {/* <p className=\"brushText\">Brush</p> */}\r\n          <input \r\n            type=\"range\" \r\n            min=\"10\" max=\"150\" \r\n            value={brushSize} \r\n            className=\"range\" \r\n            onChange={handleBrushSizeChange} \r\n          />\r\n        </div>\r\n        <div className=\"buttonEraser\" onClick={sendPicWish}>\r\n          PicWish\r\n        </div>\r\n        <div className=\"button icon\" onClick={undo}>\r\n          <HiArrowUturnLeft />\r\n        </div>\r\n        <div className=\"button icon\" onClick={redo}>\r\n          <HiArrowUturnRight />\r\n        </div>\r\n        <div className=\"button\" onClick={clearCanvas}>\r\n          Clear\r\n        </div>\r\n        <div className=\"button\" onClick={() => setZoom(zoom + 0.1)}><AiOutlineZoomIn /></div>\r\n        <div className=\"button\" onClick={() => setZoom(Math.max(0.1, zoom - 0.1))}><AiOutlineZoomOut /></div>\r\n        <div\r\n          className={`button icon ${canDownload ? \"\" : \"disabled\"}`}\r\n          id=\"download_image_link\"\r\n          onClick={canDownload ? saveImageToLocal : null}\r\n          download=\"canvas.png\"\r\n        >\r\n          <AiOutlineDownload />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DrawRectangle;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,qBAAqB;AAC5B,SAASC,iBAAiB,EAAEC,gBAAgB,QAAQ,iBAAiB;AACrE,SAASC,iBAAiB,EAACC,eAAe,EAACC,gBAAgB,QAAQ,gBAAgB;AACnF,SAASC,SAAS,QAAQ,gBAAgB;AAC1C,OAAOC,OAAO,MAAM,oBAAoB;AACxC,OAAOC,OAAO,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,MAAMC,UAAU,GAAG,GAAG,CAAC,CAAC;AACxB,MAAMC,YAAY,GAAIC,IAAI,IAAM,GAAEA,IAAK,MAAKA,IAAK,oBAAmB;AACpE,MAAMC,UAAU,GAAG,CAAC;AACpB,MAAMC,EAAE,GAAG;EACTC,SAAS,EAAE,EAAE;EACbC,KAAK,EAAE;IACLC,IAAI,EAAE,MAAM;IACZC,KAAK,EAAE;EACT,CAAC;EACDN,IAAI,EAAE,EAAE;EACRO,IAAI,EAAE,GAAG,GAAG;AACd,CAAC;AAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACyB,UAAU,EAAEC,aAAa,CAAC,GAAG1B,QAAQ,CAAC,qBAAqB,CAAC;EACnE,MAAM2B,SAAS,GAAG5B,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM6B,UAAU,GAAG7B,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAM,CAAC8B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+B,IAAI,EAAEC,OAAO,CAAC,GAAGhC,QAAQ,CAAC,CAAC;EAClC,MAAM,CAACiC,eAAe,EAAEC,kBAAkB,CAAC,GAAGlC,QAAQ,CAAC;IAAEmC,KAAK,EAAE,CAAC;IAAEC,MAAM,EAAE;EAAE,CAAC,CAAC;EAC/E,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACuC,YAAY,EAAEC,eAAe,CAAC,GAAGxC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAACyC,QAAQ,EAAEC,WAAW,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC2C,aAAa,EAAEC,gBAAgB,CAAC,GAAG5C,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM6C,YAAY,GAAG9C,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM,CAAC+C,SAAS,EAAEC,UAAU,CAAC,GAAG/C,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACgD,WAAW,EAAEC,cAAc,CAAC,GAAGjD,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACkD,IAAI,EAAEC,OAAO,CAAC,GAAGnD,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACoD,aAAa,EAAEC,gBAAgB,CAAC,GAAGrD,QAAQ,CAAC;IAAEsD,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;;EAGlE;EACAzD,SAAS,CAAC,MAAM;IACd0D,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN1D,SAAS,CAAC,MAAM;IACd2D,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,CAAC1B,IAAI,CAAC,CAAC;EAEV,MAAMyB,WAAW,GAAGA,CAAA,KAAM;IACxB,MAAME,MAAM,GAAG/B,SAAS,CAACgC,OAAO;IAChCD,MAAM,CAACvB,KAAK,GAAG,GAAG;IAClBuB,MAAM,CAACtB,MAAM,GAAG,GAAG;IACnB,MAAMwB,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACvCD,OAAO,CAACE,OAAO,GAAG,OAAO;IACzBF,OAAO,CAACG,QAAQ,GAAG,OAAO;IAC1BH,OAAO,CAACI,SAAS,GAAG,EAAE;IACtBJ,OAAO,CAACK,WAAW,GAAGxC,UAAU;IAChCG,UAAU,CAAC+B,OAAO,GAAGC,OAAO;EAC9B,CAAC;EAED,MAAMM,YAAY,GAAGA,CAAC;IAAEC;EAAY,CAAC,KAAK;IACxC,IAAI5B,YAAY,KAAKF,OAAO,CAAC+B,MAAM,GAAG,CAAC,EAAE;MACvC;MACA9B,UAAU,CAACD,OAAO,CAACgC,KAAK,CAAC,CAAC,EAAE9B,YAAY,GAAG,CAAC,CAAC,CAAC;IAChD;IAEA,MAAM;MAAE+B,OAAO;MAAEC;IAAQ,CAAC,GAAGJ,WAAW;IACxCvC,UAAU,CAAC+B,OAAO,CAACa,SAAS,CAAC,CAAC;IAC9B5C,UAAU,CAAC+B,OAAO,CAACc,MAAM,CAACH,OAAO,EAAEC,OAAO,CAAC;IAC3C3C,UAAU,CAAC+B,OAAO,CAACe,MAAM,CAACJ,OAAO,EAAEC,OAAO,CAAC;IAC3C3C,UAAU,CAAC+B,OAAO,CAACgB,MAAM,CAAC,CAAC;IAC3B7C,YAAY,CAAC,IAAI,CAAC;IAClBqC,WAAW,CAACS,cAAc,CAAC,CAAC;EAC9B,CAAC;EAED,MAAMC,IAAI,GAAGA,CAAC;IAAEV;EAAY,CAAC,KAAK;IAChC,IAAI,CAACtC,SAAS,EAAE;MACd;IACF;IAEA,MAAM;MAAEyC,OAAO;MAAEC;IAAQ,CAAC,GAAGJ,WAAW;IACxCvC,UAAU,CAAC+B,OAAO,CAACe,MAAM,CAACJ,OAAO,EAAEC,OAAO,CAAC;IAC3C3C,UAAU,CAAC+B,OAAO,CAACgB,MAAM,CAAC,CAAC;IAC3BR,WAAW,CAACS,cAAc,CAAC,CAAC;EAC9B,CAAC;EAED,MAAME,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAIjD,SAAS,EAAE;MACbS,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAEV,SAAS,CAACgC,OAAO,CAACoB,SAAS,CAAC,CAAC,CAAC,CAAC;MACvDvC,eAAe,CAACH,OAAO,CAAC+B,MAAM,CAAC;IACjC;IACAtC,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC;EAED,MAAMkD,SAAS,GAAGA,CAAA,KAAM;IACtBpD,UAAU,CAAC+B,OAAO,CAACsB,wBAAwB,GAAG,aAAa;EAC7D,CAAC;EAED,MAAMC,qBAAqB,GAAIC,KAAK,IAAK;IACvC,MAAMC,OAAO,GAAGC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC;IAC5C/D,YAAY,CAAC4D,OAAO,CAAC;;IAErB;IACA,MAAM1B,MAAM,GAAG/B,SAAS,CAACgC,OAAO;IAChC,MAAMC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACvCD,OAAO,CAACI,SAAS,GAAGoB,OAAO;EAC7B,CAAC;EAGD,MAAMI,UAAU,GAAGA,CAAA,KAAM;IACvB5D,UAAU,CAAC+B,OAAO,CAACsB,wBAAwB,GAAG,iBAAiB;EACjE,CAAC;EAED,MAAMQ,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,KAAK,GAAG/D,SAAS,CAACgC,OAAO,CAACoB,SAAS,CAAC,WAAW,CAAC;IACtD,MAAMY,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGJ,KAAK;IACjBC,IAAI,CAACI,QAAQ,GAAG,YAAY;IAC5BJ,IAAI,CAACK,KAAK,CAAC,CAAC;EACd,CAAC;EAED,MAAMC,UAAU,GAAId,KAAK,IAAK;IAC5BnD,OAAO,CAACmD,KAAK,CAACG,MAAM,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC;EAED,MAAMC,eAAe,GAAIC,GAAG,IAAK;IAC/B,MAAM1C,MAAM,GAAG/B,SAAS,CAACgC,OAAO;IAChC,MAAMC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACvC,MAAMwC,QAAQ,GAAGC,MAAM,CAACC,UAAU,GAAG,EAAE;IACvC,MAAMC,SAAS,GAAGF,MAAM,CAACG,WAAW,GAAG,GAAG;IAC1C,MAAMtE,KAAK,GAAGiE,GAAG,CAACjE,KAAK;IACvB,MAAMC,MAAM,GAAGgE,GAAG,CAAChE,MAAM;IAEzB,IAAID,KAAK,GAAGkE,QAAQ,IAAIjE,MAAM,GAAGoE,SAAS,EAAE;MAC1C,MAAME,KAAK,GAAGC,IAAI,CAACC,GAAG,CAACP,QAAQ,GAAGlE,KAAK,EAAEqE,SAAS,GAAGpE,MAAM,CAAC;MAC5DgE,GAAG,CAACjE,KAAK,GAAGA,KAAK,GAAGuE,KAAK;MACzBN,GAAG,CAAChE,MAAM,GAAGA,MAAM,GAAGsE,KAAK;IAC7B;IAEAhD,MAAM,CAACvB,KAAK,GAAGiE,GAAG,CAACjE,KAAK;IACxBuB,MAAM,CAACtB,MAAM,GAAGgE,GAAG,CAAChE,MAAM;IAC1BwB,OAAO,CAACiD,SAAS,CAACT,GAAG,EAAE,CAAC,EAAE,CAAC,EAAEA,GAAG,CAACjE,KAAK,EAAEiE,GAAG,CAAChE,MAAM,CAAC;IACnDwB,OAAO,CAACE,OAAO,GAAG,OAAO;IACzBF,OAAO,CAACG,QAAQ,GAAG,OAAO;IAC1BH,OAAO,CAACI,SAAS,GAAG,EAAE;IACtBJ,OAAO,CAACK,WAAW,GAAGxC,UAAU;IAChCS,kBAAkB,CAAC;MAAEC,KAAK,EAAEiE,GAAG,CAACjE,KAAK;MAAEC,MAAM,EAAEgE,GAAG,CAAChE;IAAO,CAAC,CAAC;IAC5DJ,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAED,MAAMyB,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,MAAMC,MAAM,GAAG/B,SAAS,CAACgC,OAAO;IAEhC,IAAI5B,IAAI,EAAE;MACR,MAAM+E,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAE/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;QACrB,MAAMb,GAAG,GAAG,IAAIc,KAAK,CAAC,CAAC;QACvBtE,gBAAgB,CAACwD,GAAG,CAAC;QAErBA,GAAG,CAACY,MAAM,GAAG,MAAM;UACjBb,eAAe,CAACC,GAAG,CAAC;QACtB,CAAC;QAEDA,GAAG,CAACe,GAAG,GAAGF,CAAC,CAAC3B,MAAM,CAAC8B,MAAM;MAC3B,CAAC;MAEDN,MAAM,CAACO,aAAa,CAACtF,IAAI,CAAC;IAC5B;EACF,CAAC;EAED,MAAMuF,WAAW,GAAGA,CAAA,KAAM;IACxB,MAAM5D,MAAM,GAAG/B,SAAS,CAACgC,OAAO;IAChC,MAAMC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACvCD,OAAO,CAAC2D,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE7D,MAAM,CAACvB,KAAK,EAAEuB,MAAM,CAACtB,MAAM,CAAC;IACpDE,UAAU,CAAC,EAAE,CAAC;IACdE,eAAe,CAAC,CAAC,CAAC,CAAC;IACnBS,cAAc,CAAC,KAAK,CAAC;IACrBL,gBAAgB,CAAC,IAAI,CAAC;IACtBF,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,MAAM8E,IAAI,GAAGA,CAAA,KAAMC,mBAAmB,CAAClF,YAAY,GAAG,CAAC,CAAC;EACxD,MAAMmF,IAAI,GAAGA,CAAA,KAAMD,mBAAmB,CAAClF,YAAY,GAAG,CAAC,CAAC;EAExD,MAAMkF,mBAAmB,GAAIE,QAAQ,IAAK;IACxC,IAAIA,QAAQ,IAAI,CAAC,IAAIA,QAAQ,GAAGtF,OAAO,CAAC+B,MAAM,EAAE;MAC9C5B,eAAe,CAACmF,QAAQ,CAAC;MACzB,MAAMvB,GAAG,GAAG,IAAIc,KAAK,CAAC,CAAC;MACvBd,GAAG,CAACe,GAAG,GAAG9E,OAAO,CAACsF,QAAQ,CAAC;MAC3BvB,GAAG,CAACY,MAAM,GAAG,MAAM;QACjB,MAAMtD,MAAM,GAAG/B,SAAS,CAACgC,OAAO;QAChC,MAAMC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;QACvCD,OAAO,CAAC2D,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE7D,MAAM,CAACvB,KAAK,EAAEuB,MAAM,CAACtB,MAAM,CAAC;QACpDwB,OAAO,CAACiD,SAAS,CAACT,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;MAC9B,CAAC;IACH;EACF,CAAC;EAED,MAAMwB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;MAC5B/E,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMgF,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;MAC5C,MAAMC,MAAM,GAAGH,OAAO,CAACC,GAAG,CAACG,iBAAiB;MAE5C,IAAI,CAACzF,aAAa,IAAI,CAACF,QAAQ,EAAE;QAC/BM,UAAU,CAAC,KAAK,CAAC;QACjBsF,KAAK,CAAC,2CAA2C,CAAC;QAClD;MACF;MAEA,MAAMC,WAAW,GAAG7F,QAAQ,IAAIE,aAAa;;MAE7C;MACA,MAAM4F,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;;MAE/B;MACAD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEH,WAAW,CAAC;;MAE1C;MACA,MAAM5E,MAAM,GAAGkC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMjC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;;MAEvC;;MAEA;MACA,MAAM6E,IAAI,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK;QAC1ClF,MAAM,CAACmF,MAAM,CAACD,OAAO,EAAE,YAAY,CAAC;MACtC,CAAC,CAAC;;MAEF;MACA,MAAME,SAAS,GAAG,IAAIC,IAAI,CAAC,CAACL,IAAI,CAAC,EAAE,WAAW,CAAC;;MAE/C;MACAH,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEK,SAAS,CAAC;;MAExC;MACA;;MAEA;MACAP,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEO,QAAQ,CAAC;;MAEtC;MACAT,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;MAE5B,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACnB,MAAM,EAAE;QACnCoB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,WAAW,EAAEjB,MAAM;UACnB,aAAa,EAAE,mBAAmB,CAAE;QACtC,CAAC;;QACDkB,IAAI,EAAEd;MACR,CAAC,CAAC;MAEF,IAAIU,QAAQ,CAACK,EAAE,EAAE;QACfvG,UAAU,CAAC,KAAK,CAAC;QACjB,MAAMwG,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QAClC3B,OAAO,CAACC,GAAG,CAACyB,IAAI,CAAC;QACjB,MAAME,QAAQ,GAAGF,IAAI,CAACA,IAAI,CAAC7D,KAAK;QAEhC,IAAI+D,QAAQ,EAAE;UACZ,MAAMrD,GAAG,GAAG,IAAIc,KAAK,CAAC,CAAC;UACvBd,GAAG,CAACsD,WAAW,GAAG,WAAW;UAC7BtD,GAAG,CAACY,MAAM,GAAG,MAAM;YACjBb,eAAe,CAACC,GAAG,CAAC;YACpB1D,WAAW,CAAC0D,GAAG,CAAC;YAChBnD,cAAc,CAAC,IAAI,CAAC;UACtB,CAAC;UACDmD,GAAG,CAACe,GAAG,GAAGsC,QAAQ;QACpB,CAAC,MAAM;UACL5B,OAAO,CAAC8B,KAAK,CAAC,yCAAyC,CAAC;QAC1D;MACF,CAAC,MAAM;QACL,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;MAC/D;IACF,CAAC,CAAC,OAAOD,KAAK,EAAE;MACd5G,UAAU,CAAC,KAAK,CAAC;MACjB8E,OAAO,CAAC8B,KAAK,CAACA,KAAK,CAAC;IACtB;EACJ,CAAC;EAIC,oBACEjJ,OAAA;IAAKmJ,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACnBpJ,OAAA;MAAKmJ,SAAS,EAAC,YAAY;MAACE,OAAO,EAAEA,CAAA,KAAMlH,YAAY,CAACc,OAAO,CAACqC,KAAK,CAAC,CAAE;MAAA8D,QAAA,eACtEpJ,OAAA,CAACJ,SAAS;QAAA0J,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eACNzJ,OAAA;MAAO0J,QAAQ,EAAEnE,UAAW;MAACoE,QAAQ,EAAE,KAAM;MAACC,GAAG,EAAEzH,YAAa;MAAC0H,IAAI,EAAC,MAAM;MAACC,MAAM;IAAA;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEtFzJ,OAAA;MAAK+J,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAE,CAAE;MAAAZ,QAAA,GACxBhH,SAAS,gBAAGpC,OAAA,CAACH,OAAO;QAAAyJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAG,IAAI,eAC/BzJ,OAAA;QACE4J,GAAG,EAAE3I,SAAU;QACfgJ,WAAW,EAAEzG,YAAa;QAC1B0G,WAAW,EAAE/F,IAAK;QAClBgG,SAAS,EAAE/F,WAAY;QACvBgG,YAAY,EAAEhG,WAAY;QAC1B2F,KAAK,EAAE;UACLM,SAAS,EAAG,SAAQ7H,IAAK;QAC3B;MAAE;QAAA8G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENzJ,OAAA;MAAKmJ,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACtBpJ,OAAA;QAAKmJ,SAAS,EAAC,YAAY;QAAAC,QAAA,eAEzBpJ,OAAA;UACE6J,IAAI,EAAC,OAAO;UACZ3D,GAAG,EAAC,IAAI;UAACoE,GAAG,EAAC,KAAK;UAClBzF,KAAK,EAAEhE,SAAU;UACjBsI,SAAS,EAAC,OAAO;UACjBO,QAAQ,EAAElF;QAAsB;UAAA8E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACNzJ,OAAA;QAAKmJ,SAAS,EAAC,cAAc;QAACE,OAAO,EAAEnC,WAAY;QAAAkC,QAAA,EAAC;MAEpD;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNzJ,OAAA;QAAKmJ,SAAS,EAAC,aAAa;QAACE,OAAO,EAAEvC,IAAK;QAAAsC,QAAA,eACzCpJ,OAAA,CAACR,gBAAgB;UAAA8J,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CAAC,eACNzJ,OAAA;QAAKmJ,SAAS,EAAC,aAAa;QAACE,OAAO,EAAErC,IAAK;QAAAoC,QAAA,eACzCpJ,OAAA,CAACT,iBAAiB;UAAA+J,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC,eACNzJ,OAAA;QAAKmJ,SAAS,EAAC,QAAQ;QAACE,OAAO,EAAEzC,WAAY;QAAAwC,QAAA,EAAC;MAE9C;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNzJ,OAAA;QAAKmJ,SAAS,EAAC,QAAQ;QAACE,OAAO,EAAEA,CAAA,KAAM5G,OAAO,CAACD,IAAI,GAAG,GAAG,CAAE;QAAA4G,QAAA,eAACpJ,OAAA,CAACN,eAAe;UAAA4J,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrFzJ,OAAA;QAAKmJ,SAAS,EAAC,QAAQ;QAACE,OAAO,EAAEA,CAAA,KAAM5G,OAAO,CAACwD,IAAI,CAACqE,GAAG,CAAC,GAAG,EAAE9H,IAAI,GAAG,GAAG,CAAC,CAAE;QAAA4G,QAAA,eAACpJ,OAAA,CAACL,gBAAgB;UAAA2J,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrGzJ,OAAA;QACEmJ,SAAS,EAAG,eAAc7G,WAAW,GAAG,EAAE,GAAG,UAAW,EAAE;QAC1DiI,EAAE,EAAC,qBAAqB;QACxBlB,OAAO,EAAE/G,WAAW,GAAGyC,gBAAgB,GAAG,IAAK;QAC/CM,QAAQ,EAAC,YAAY;QAAA+D,QAAA,eAErBpJ,OAAA,CAACP,iBAAiB;UAAA6J,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC7I,EAAA,CAlUID,aAAa;AAAA6J,EAAA,GAAb7J,aAAa;AAoUnB,eAAeA,aAAa;AAAC,IAAA6J,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}